<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Single Page Apps for GitHub Pages</title>
    <meta name="robots" content="noindex" />
    <script type="text/javascript">
      // URL에서 파라미터를 가져오는 함수
      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split("=");
          if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
          }
        }
        return null;
      }

      // 이미 리다이렉트된 경우 추가 리다이렉트를 하지 않음
      var redirected = getQueryVariable("redirected");
      if (!redirected) {
        var segmentCount = 0; // 경로의 첫 번째 세그먼트만 처리하는 변수
        var l = window.location;
        var newUrl =
          l.protocol +
          "//" +
          l.hostname +
          (l.port ? ":" + l.port : "") +
          l.pathname
            .split("/")
            .slice(0, 1 + segmentCount) // 첫 번째 세그먼트까지 슬라이싱
            .join("/") +
          "/?redirected=true&p=/" +
          l.pathname
            .slice(1)
            .split("/")
            .slice(segmentCount)
            .join("/")
            .replace(/&/g, "~and~") +
          (l.search ? "&q=" + l.search.slice(1).replace(/&/g, "~and~") : "") +
          l.hash;

        // 새로운 URL로 리다이렉트 처리
        window.location.replace(newUrl);
      }
    </script>
  </head>
  <body>
    <p>리다이렉트 중입니다. 잠시만 기다려 주세요...</p>
  </body>
</html>
